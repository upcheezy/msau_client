(this.webpackJsonpmsau_client=this.webpackJsonpmsau_client||[]).push([[0],{143:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(51),i=a.n(r),s=(a(61),a(5)),l=a(6),c=a(8),d=a(7),m=a(54),u=a(33),h=a(24),f=a.n(h),p=(a(62),"pk.eyJ1IjoidXBjaGVlenkiLCJhIjoiY2tjOXYxbm16MGRyeDJzcWoydnliaXNtYSJ9.Qfv8efsw9v6tJqOmOOnqag"),E=a(34),g=a(63),w=a(112),b=a(142),S=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={codeGeom:{},hasZoomed:!1},e.updateCodeGeom=function(){if(e.props.selectedData&&(window.map.getLayer("membergeom")?window.map.getSource("membergeom").setData(e.state.codeGeom):(window.map.addSource("membergeom",{type:"geojson",data:e.state.codeGeom,generateId:!0}),window.map.addLayer({id:"membergeom",type:"fill",source:"membergeom",paint:{"fill-color":"fuchsia","fill-opacity":.6}})),!1===e.props.hasZoomedProp)){e.props.hasZoomedTrue();var t=E.bbox(e.state.codeGeom);window.map.fitBounds(t,{padding:50})}},e.buildMap=function(t){f.a.accessToken=p,window.map=new f.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-81.276855,33.596319],zoom:7});var a=new w({accessToken:p,mapboxgl:f.a,countries:"us",bbox:[-83.726807,31.784217,-78.013916,35.415915]}).on("result",(function(e){e.result}));window.map.addControl(a);var n=new g({displayControlsDefault:!1,controls:{polygon:!0,line_string:!0,point:!0,trash:!0}});window.map.addControl(n,"bottom-right"),window.map.on("draw.create",(function(t){var a=Object(u.a)(Object(u.a)({},t.features[0].geometry),{},{id:t.features[0].id});e.props.selectedDrawItemHandler(a),n.delete(e.props.noCodeGeom)})),window.map.on("draw.delete",(function(t){e.props.deleteDrawData(t.features[0].id)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.buildMap()}},{key:"componentDidUpdate",value:function(){if(this.updateCodeGeom(),this.props.zoomGeom&&!1===this.props.numberClickZoom){this.props.hasZoomedNumberClickTrue();var e=b(this.props.zoomGeom),t=E.bbox(e);window.map.fitBounds(t,{padding:20})}}},{key:"render",value:function(){return o.a.createElement("div",{id:"map"})}}]),a}(n.Component);S.getDerivedStateFromProps=function(e,t){if(e.selectedData)return{codeGeom:b(e.selectedData.geom)}};a(143);var y=a(23),v=a(55),C=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={showInfoPanel:!0,codes:[],selectedCode:"",confirmation:!1,confirmationError:!1,buffer:"",spinner:!1},e.togglePanel=function(){e.setState({showInfoPanel:!e.state.showInfoPanel})},e.codeHandler=function(t){e.setState({selectedCode:t}),e.props.codeGeom(t),e.props.hasZoomed()},e.handleGeomZoom=function(t){e.props.zoomToGeomNumberClick(t),e.props.hasZoomedNumberClick()},e.handleConfirmation=function(t){e.setState({confirmation:t.target.checked})},e.handleConfirmationButtonClick=function(){if(e.state.confirmation&&e.props.drawGeom.length>=1){e.props.handleSpinner();var t={drawGeom:e.props.drawGeom,buffer:e.state.buffer};e.props.drawGeom.forEach((function(a,n){var o=e.props.wktConverter(a);t.drawGeom[n].string=o})),fetch("https://msauserver.sc811.com//submit",{method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error(e.status);window.location.reload(!1)})).catch((function(t){return e.setState({error:t})}))}else e.setState({confirmationError:!0}),alert("please make an edit before submitting")},e.handleBuffer=function(t){e.setState({buffer:t.target.value})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"info_panel_cont"},o.a.createElement("div",{className:this.state.showInfoPanel?"info_panel_content show":"info_panel_content blurry"},o.a.createElement("div",{className:"header-background"},o.a.createElement("h1",null,"MSAU Edit Tracking")),o.a.createElement("h2",null,"Editable Codes"),o.a.createElement("hr",null),this.props.codes&&this.props.codes[0]&&this.props.codes[0].codes.map((function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{onClick:function(){return e.codeHandler(t)},className:"code-text"},t),e.props.drawGeom.filter((function(e){return e.code===t})).map((function(t,a){return o.a.createElement("p",{className:t.operation,onClick:function(){return e.handleGeomZoom(t)}},a+1)})))})),o.a.createElement("hr",{className:"low-hr"}),o.a.createElement("form",{className:"buffer-form"},o.a.createElement("label",{htmlFor:"buffer"},"Buffer Size (ft): "),o.a.createElement("input",{type:"text",onChange:this.handleBuffer,className:"input-text-buffer",placeholder:"25"}),o.a.createElement("div",null,o.a.createElement("div",{"data-tip":"Buffers are for points and lines. If you do not specify one, 25ft will be applied."},o.a.createElement(v.a,null),o.a.createElement(y.a,null)))),o.a.createElement("div",{className:"confirmation-area"},o.a.createElement("input",{type:"checkbox",name:"confirmation",value:"confirmation",onChange:this.handleConfirmation}),o.a.createElement("p",null,"I accept the SC811 MSAU"," ",o.a.createElement("span",{onClick:this.props.handleConfirmationModal,style:{color:"blue",cursor:"pointer"}},"terms of service"))),o.a.createElement("button",{onClick:this.handleConfirmationButtonClick,disabled:!this.state.confirmation,className:"submit-button"},"Submit Edits")))}}]),a}(n.Component),A=(a(146),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).clickHandler=function(t){var a=e.props.currentDrawItem;a.operation=t,e.props.grabDrawData(a)},e.cancelHandler=function(){e.props.removeDrawnDataAfterModalCancel(),e.props.toggleModal()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"modal-cont"},o.a.createElement("div",{className:"modal-content"},o.a.createElement(y.b,{className:"x-button",onClick:function(){return e.cancelHandler()}}),o.a.createElement("p",null,"Is this an addition or subtraction?"),o.a.createElement("div",{className:"button-container"},o.a.createElement("button",{className:"modal-button addition",onClick:function(){return e.clickHandler("addition")}},"Addition"),o.a.createElement("button",{className:"modal-button subtraction",onClick:function(){return e.clickHandler("subtraction")}},"Subtraction"))))}}]),a}(n.Component)),T=(a(147),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"modal-text"},o.a.createElement("h3",null,"SC811 MSAU Terms of Service"),o.a.createElement("p",{className:"paragraph-text"},"You have requested access to the Member Service Area Updater (MSAU) Application from South Carolina 811 (SC811). In order to use the MSAU Application, you, must read the following and agree to be bound by the following terms of use."),o.a.createElement("p",{className:"paragraph-text"},'THIS LICENSE AGREEMENT is a legal agreement between you, and the company for which you work (collectively, the "End-User") and SC811, a South Carolina corporation ("SC811"). As used in this Agreement, "Software" means, collectively, the MSAU Application software and systems, together with any and all enhancements, upgrades and updates thereto that may be provided to End-User in the future by SC811.'),o.a.createElement("p",{className:"paragraph-text"},"PLEASE READ THIS AGREEMENT CAREFULLY BEFORE USING THE SOFTWARE THAT YOU HAVE LOGGED INTO. BY USING THE SOFTWARE YOU ARE ACCEPTING THE TERMS OF THIS AGREEMENT AND USE OF THE SOFTWARE INDICATES YOUR ACCEPTANCE OF THIS AGREEMENT AND ITS TERMS BY THE COMPANY FOR WHICH YOU WORK. IF YOU, OR YOUR COMPANY, DO NOT AGREE TO THESE TERMS AND CONDITIONS, YOU SHOULD REFRAIN FROM USING THE SOFTWARE. BY ACCEPTING THIS AGREEMENT, YOU, CERTIFY THAT YOU HAVE THE AUTHORITY TO BIND YOURSELF AND YOUR COMPANY TO THIS AGREEMENT."),"\n",o.a.createElement("p",{className:"paragraph-text"},o.a.createElement("ol",null,o.a.createElement("li",null,o.a.createElement("em",null,"MSAU Application Ownership.")," ","\n",o.a.createElement("p",null,'By this Agreement, SC811 is licensing its web-based software application, known as "Member Service Area Updater (MSAU) Application" on a limited license for use only on a web server hosted and controlled by SC811. SC811 is at all times the owner of the Software and retains all ownership rights in the Software, including any updates, enhancements, modification, revisions or additions thereto. SC811 is under no obligation to End-User to provide End-User access or use of the Software and nothing herein grants End-User any right, including right of expectation, for use of such Software. SC811 shall be under no obligation to provide updates, enhancements, modifications, revisions or additions to the Software. If the Software is made available for use to End-User, SC811 may provide the dedicated servers needed for End-User\'s use of the Software. Rights not specifically granted in this Agreement are expressly reserved by SC811. Nothing in this Agreement shall be construed to confer any rights to third party beneficiaries. End-User will never receive a copy of the Software. SC811 will never release the software code for the Software to End-User. The license granted herein is entirely contingent upon SC811 hosting the Software and never releasing any copies of the Software, which means that End-User will never host the Software itself and may never install the Software on any if its computers. In no event does the license or this Agreement entitle End-User to any rights of ownership in any of the work flow design, process flow design, or the code in the underlying page, program, database, software, or any other code used to draw or render the elements on the web page, all of which is owned by SC811.')),o.a.createElement("li",null,o.a.createElement("em",null,"Grant of License.")," ","\n",o.a.createElement("p",null,'SC811 grants End-User, and by End-User\'s use of the Software, End-User accepts, pursuant and subject to the terms and conditions of this Agreement, a limited, nonexclusive, non-transferrable, non-assignable, revocable right to use the Software ("License"), solely and strictly in accordance with the terms, conditions and restrictions applicable to the License, as described herein.')),o.a.createElement("li",null,o.a.createElement("em",null,"Term. ")," ","\n",o.a.createElement("p",null,"SC811 may, in its sole discretion, without prior notification and without limiting its remedies or incurring any liability to End-User, either temporarily disable or permanently discontinue the furnishing of the Software to End-User in whole or in part.")),o.a.createElement("li",null,o.a.createElement("em",null,"End-User Responsibility")," ","\n",o.a.createElement("p",null,"End-User shall not use or permit its end users to use the Software in any way that violates laws, infringes the rights of others, or interferes with SC811, and any entities from whom SC811 obtains network or web services. End-User agrees unconditionally to not cause harm to SC811 or third party equipment, software, or processes used in connection with furnishing the Software. Any breach of this provision may result in civil and/or criminal penalties pursuant to applicable local, state and federal law.")),o.a.createElement("li",null,o.a.createElement("em",null,"SC811's Rights.")," ","\n",o.a.createElement("p",null,'End-User acknowledges and agrees that the Software and any and all documentation (the "Licensed Products") are proprietary products of SC811 under international copyright law. End-User shall take all reasonable steps to safeguard the Licensed Products. SC811 owns and retains all copyright, trademark, trade secret and other proprietary rights in and to the Licensed Products. Without the prior written consent of SC811, End-User shall not modify or change the Software or reverse engineer, decompile or disassemble the same.')),o.a.createElement("li",null,o.a.createElement("em",null,"Indemnity.")," ","\n",o.a.createElement("p",null,"End-User shall indemnify and hold harmless SC811 from and against any loss, cost, claim, liability, damage, or expense (including reasonable attorneys' fees) to third parties, relating to or arising from the use of the Software by End-User or any of their personnel, whether or not End-User has knowledge of or has authorized such access or use, including, without limitation, claims for libel, slander, invasion of privacy, infringement of copyright, patent infringement (where End-User has used, connected, or combined the Software with the products or services of others), negligence, or tortious behavior. End-User agrees to indemnify SC811 and any entities from whom SC811 obtains network services, third party software, information or data and to hold SC811 and any such entities from whom SC811 obtains network services, third party software, information or data harmless from any claims resulting from the use of the Software by End-User or End-User's end users that causes damage to SC811 and any entities from whom SC811 obtains network services, third party software, information or data or that violates the law. As a condition of End-User\u2019s use of the Software End-User agrees to defend and indemnify SC811 and its licensees from and against any damages, costs, liabilities, settlement amounts and/or expenses (including, without limitation, attorneys' fees and other dispute resolution expenses) incurred in connection with any claim, lawsuit or action by any third party that arises or results from End-User or End-User\u2019s use or misuse of the Software.")),o.a.createElement("li",null,o.a.createElement("em",null,"Disclaimers.")," ","\n",o.a.createElement("p",null,"THE SOFTWARE IS LICENSED \"AS IS\". SC811 DISCLAIMS ANY AND ALL WARRANTIES, WHETHER, EXPRESSED OR IMPLIED, INCLUDING, WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, OR AS TO THE QUALITY, UTILITY OR PERFORMANCE OF THE SOFTWARE, ALL OF WHICH ARE HEREBY EXPRESSLY EXCLUDED. SC811 MAKES NO WARRANTY THAT (i) THE SOFTWARE WILL MEET END-USER'S REQUIREMENTS, (ii) THE SOFTWARE WILL BE UNINTERRUPTED, TIMELY, SECURE, OR ERROR-FREE, (iii) THE RESULTS THAT MAY BE OBTAINED FROM THE USE OF THE SOFTWARE WILL BE ACCURATE OR RELIABLE, AND (iv) THE QUALITY OF ANY PRODUCTS, SERVICES, INFORMATION, OR OTHER MATERIAL PURCHASED OR OBTAINED BY END-USER THROUGH THE SOFTWARE WILL MEET END-USER'S EXPECTATIONS. THE END-USER ASSUMES RESPONSIBILITY FOR SELECTING THE SOFTWARE TO ACHIEVE ITS INTENDED RESULTS. NO ADVICE OR INFORMATION, WHETHER ORAL OR WRITTEN, OBTAINED BY END-USER FROM SC811 SHALL CREATE ANY WARRANTY NOT EXPRESSLY STATED IN THIS AGREEMENT."),o.a.createElement("p",null,'SC811 has no control over third party software, information or data and all third party software, information or data is provided to End-User on an "as-is" basis, with no warranties of any kind. SC811, disclaims all warranties and conditions, either express, implied, or statutory, including, but not limited to, any (if any) non-infringement, or that the operation of any third party software, information and data will be uninterrupted, error-free or virus-free, except to the extent that these disclaimers are held to be legally invalid.')),o.a.createElement("li",null,o.a.createElement("em",null,"Limiation of Liability."),o.a.createElement("p",null,"In no event shall SC811 be liable for any damages whatsoever, including, but not limited to special, exemplary, punitive, indirect, incidental or consequential damages, expenses, charges or claims, including but not limited to loss of profits, loss of business or business opportunity, loss of use, and etc., arising out of the use or inability to use the Software, or for any claim by any entity not a party to this Agreement. SC811 shall have no liability with respect to any obligations or liabilities arising from the terms and conditions of this Agreement for special, exemplary, punitive, indirect, incidental or consequential damages, expenses, charges or claims, even if it has been advised of the possibility of such damages, expenses, charges or claims."),o.a.createElement("p",null,"SC811 shall have no liability with respect to any third party software and SC811 does not guarantee the accuracy of any of the information contained therein, including, but not limited to, database information, geographic information systems information, geo-spatial information and document images. SC811 shall have no liability for any damages incurred, whether directly, indirectly, incidental, punitive or consequential, as a result of any errors, omissions or discrepancies in any information provided through third party software, including, but not limited to mapping software."),o.a.createElement("p",null,'The End-User agrees that the liability of SC811 for actual proven damages, expenses, charges or claims for any cause whatsoever, including but not limited to liability arising out of contract, tort, including, but not limited to negligence and strict liability, or for breach of warranty or otherwise, shall be the "Liability Limitation Amount" as defined herein. The Liability Limitation Amount shall be the lesser of (i) the actually proven damages, expenses, charges or claims; or (ii) the amount the End-User paid to SC811 for the Software license.')),o.a.createElement("li",null,o.a.createElement("em",null,"General Provisions.")," ","\n",o.a.createElement("ol",null,o.a.createElement("li",null,o.a.createElement("em",null,"Arbitration."),o.a.createElement("p",null,"Any controversy or claim arising out of this Agreement or the use of the Software shall be settled by Arbitration. No arbitration or other action under this Agreement, may be brought by either party against the other party, more than one (1) year after the cause of action arises. Any unresolved disputes concerning this Agreement shall be submitted to arbitration before a single arbitrator in Minneapolis, Minnesota and the arbitration shall be conducted under the rules then prevailing of the American Arbitration Association. The arbitrator may award attorney's fees and expenses as part of his award. The award of the arbitrator shall be binding and may be entered as a judgment in any court of competent jurisdiction.")),o.a.createElement("li",null,o.a.createElement("em",null,"Force Majeure."),o.a.createElement("p",null,"SC811's performance under this agreement shall be excused for any reason, including, but not limited to: labor difficulties, governmental orders, civil commotions, acts of god, or other conditions or circumstances beyond SC811's reasonable control. SC811 shall not be liable for interruptions caused by failure of equipment or services, failure of communications, power outages, or other interruptions not within the complete control of SC811. SC811 shall not be liable for performance deficiencies caused or created by End-User's equipment. SC811 shall not be liable if changes in operation, procedures, or services require modification or alteration of End-User's, or End-User's users' equipment, render the same obsolete or otherwise affect its performance.")),o.a.createElement("li",null,o.a.createElement("em",null,"Successors and Assigns."),o.a.createElement("p",null,"This Agreement shall be binding upon and inure to the benefit of the parties hereto and their assigns, legal representatives, heirs or successors provided that End-User shall not assign any right or obligation hereunder in whole or in part, without the prior written consent of the SC811 hereto, and any attempt to do so shall be void.")),o.a.createElement("li",null,o.a.createElement("em",null,"Severable Provisions."),o.a.createElement("p",null,"Each provision of this Agreement is intended to be severable. If any provision hereof is illegal or invalid for any reason whatsoever, such illegality or invalidity shall not affect the validity of the remainder of this Agreement.")),o.a.createElement("li",null,o.a.createElement("em",null,"Governing Law."),o.a.createElement("p",null,"This Agreement shall be construed and enforced in accordance with the laws of the State of South Carolina.")))))),o.a.createElement("div",{className:"close-button"},o.a.createElement("button",{onClick:this.props.handleConfirmationModal},"Close")))}}]),a}(n.Component)),O=(a(148),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={selectedCode:"",showModal:!1,drawGeom:[],currentDrawItem:{},noCodeGeom:"",hasZoomed:!1,zoomGeom:"",numberClickZoom:!1,confirmationModal:!1},e.grabCodeGeom=function(t){if(e.props.geomData.length>0){var a=e.props.geomData.find((function(e){return e.codes===t}));e.setState({selectedCodeData:a})}},e.hasZoomed=function(){e.setState({hasZoomed:!1})},e.hasZoomedTrue=function(){e.setState({hasZoomed:!0})},e.hasZoomedNumberClick=function(){e.setState({numberClickZoom:!1})},e.hasZoomedNumberClickTrue=function(){e.setState({numberClickZoom:!0})},e.toggleModal=function(){!0===e.state.showModal&&e.removeDrawnDataAfterModalCancel(e.state.currentDrawItem.id),e.setState({showModal:!e.state.showModal})},e.grabDrawData=function(t){e.setState({drawGeom:[].concat(Object(m.a)(e.state.drawGeom),[t]),showModal:!1})},e.deleteDrawData=function(t){var a=e.state.drawGeom.filter((function(e){return e.id!==t}));e.setState({drawGeom:a})},e.removeDrawnDataWithoutCodeSelected=function(t){e.setState({noCodeGeom:t})},e.removeDrawnDataAfterModalCancel=function(t){e.setState({noCodeGeom:t})},e.wktConverter=function(e){var t;if("Polygon"===e.type){var a=[];e.coordinates[0].forEach((function(e){a.push(e.join(" "))}));var n=e.type,o=a.toString();t="".concat(n," ((").concat(o,"))")}else if("Point"===e.type)t="".concat(e.type,"(").concat(e.coordinates[0]," ").concat(e.coordinates[1],")");else if("LineString"===e.type){var r=[];e.coordinates.forEach((function(e){r.push(e.join(" "))}));var i=e.type,s=r.toString();t="".concat(i," (").concat(s,")")}return t},e.zoomToGeomNumberClick=function(t){var a=e.wktConverter(t);e.setState({zoomGeom:a})},e.selectedDrawItemHandler=function(t){void 0===e.state.selectedCodeData?(alert("Please select a code to edit."),e.removeDrawnDataWithoutCodeSelected(t.id)):(t.code=e.state.selectedCodeData.codes,e.toggleModal(t),e.setState({currentDrawItem:t}))},e.handleConfirmationModal=function(){e.setState({confirmationModal:!e.state.confirmationModal})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{id:"main_cont"},o.a.createElement(C,{codeGeom:this.grabCodeGeom,codes:this.props.codes,drawGeom:this.state.drawGeom,hasZoomed:this.hasZoomed,zoomToGeomNumberClick:this.zoomToGeomNumberClick,hasZoomedNumberClick:this.hasZoomedNumberClick,handleConfirmationModal:this.handleConfirmationModal,wktConverter:this.wktConverter,handleSpinner:this.props.handleSpinner}),o.a.createElement(S,{codes:this.props.codes,selectedData:this.state.selectedCodeData,toggleModal:this.toggleModal,deleteDrawData:this.deleteDrawData,selectedDrawItemHandler:this.selectedDrawItemHandler,noCodeGeom:this.state.noCodeGeom,drawGeom:this.state.drawGeom,hasZoomedProp:this.state.hasZoomed,hasZoomedTrue:this.hasZoomedTrue,zoomGeom:this.state.zoomGeom,numberClickZoom:this.state.numberClickZoom,hasZoomedNumberClick:this.hasZoomedNumberClick,hasZoomedNumberClickTrue:this.hasZoomedNumberClickTrue}),this.state.showModal?o.a.createElement(A,{toggleModal:this.toggleModal,deleteDrawData:this.deleteDrawData,grabDrawData:this.grabDrawData,currentDrawItem:this.state.currentDrawItem,removeDrawnDataAfterModalCancel:this.removeDrawnDataAfterModalCancel}):null,this.state.confirmationModal?o.a.createElement(T,{handleConfirmationModal:this.handleConfirmationModal}):null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{codeData:e.geomData}}}]),a}(n.Component)),N=a(22),I=a(52),D=a.n(I),R=(a(149),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={error:null},e.changeHandler=function(t){e.setState(Object(N.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.onLogin(e.state)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.error;return o.a.createElement("div",{className:"login-page"},o.a.createElement("div",{className:"form-container"},o.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},o.a.createElement("img",{src:D.a,alt:"SC811 logo",className:"logo"}),o.a.createElement("h2",null,"MSAU Application"),o.a.createElement("p",null,"(Member Service Area Updater)"),o.a.createElement("div",{className:"login_error",role:"alert"},e&&o.a.createElement("p",null,e.message)),o.a.createElement("div",{className:"uname"},o.a.createElement("label",{htmlFor:"username"}),o.a.createElement("input",{type:"text",name:"username",id:"username",placeholder:"username",required:!0,onChange:this.changeHandler})),o.a.createElement("div",{className:"pw"},o.a.createElement("label",{htmlFor:"password"}),o.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"password",required:!0,onChange:this.changeHandler})),o.a.createElement("input",{type:"submit",value:"Sign In",className:"signin-button"}))))}}]),a}(n.Component)),U=a(3),k=(a(150),function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={isAuth:!1,codes:[],spinner:!1,background:!1},e.Login=function(t){fetch("https://msauserver.sc811.com//login",{method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(a){if(a.token){var n=new Date,o=n.getHours()+1,r=n.setHours(o),i=new Date(r);window.localStorage.setItem("edate",i),window.localStorage.setItem("token",a.token),window.localStorage.setItem("codes",a.codes.rows[0].codes.join(" ")),e.setState({isAuth:!0,codes:a.codes.rows}),e.getGeom(t),e.props.history.push("/")}})).catch((function(t){return e.setState({error:t})}))},e.getGeom=function(t){e.handleSpinner(),fetch("https://msauserver.sc811.com//code",{method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(t){e.setState({geomData:t.rows}),e.handleSpinner()})).catch((function(t){return e.setState({error:t})}))},e.handleSpinner=function(){e.setState({spinner:!e.state.spinner})},e.handleBackground=function(){e.setState({background:!e.state.background})},e.Signup=function(t){fetch("https://msauserver.sc811.com//signup",{method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(){e.Login(t)})).catch((function(t){return e.setState({error:t})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("token");if(e){var t=window.localStorage.edate;if(new Date(t)<=new Date)window.localStorage.removeItem("token"),window.localStorage.removeItem("codes"),window.localStorage.removeItem("edate");else{var a=window.localStorage.getItem("codes");a=[{codes:a.split(" ")}],this.setState({isAuth:!0,codes:a}),this.getGeom({token:e})}}}},{key:"render",value:function(){var e=this,t=o.a.createElement(U.c,null,o.a.createElement(U.a,{path:"/",render:function(){return o.a.createElement(R,{onLogin:e.Login})}}));return this.state.isAuth&&(t=o.a.createElement(U.c,null,o.a.createElement(U.a,{path:"/",render:function(){return o.a.createElement(O,{geomData:e.state.geomData,codes:e.state.codes,spinner:e.state.spinner,handleSpinner:e.handleSpinner})}}))),o.a.createElement("div",null,this.state.spinner?o.a.createElement("div",{className:"spinner-background"},o.a.createElement("div",{className:"spinner"})):"",t)}}]),a}(n.Component)),M=a(32);i.a.render(o.a.createElement(M.a,null,o.a.createElement(k,null)),document.getElementById("root"))},52:function(e,t,a){e.exports=a.p+"static/media/SC811.85a5fec5.png"},56:function(e,t,a){e.exports=a(153)},61:function(e,t,a){},62:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.f6649b8a.chunk.js.map